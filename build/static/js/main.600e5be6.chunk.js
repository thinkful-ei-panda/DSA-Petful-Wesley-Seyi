(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{2:function(e,t){e.exports={API_ENDPOINT:"https://secure-waters-44156.herokuapp.com/api/",API_KEY:"b9%dp&:gV%DFxkVLK-.N(T/~#59<D;+mB,g/j&="}},23:function(e,t,n){e.exports=n(36)},28:function(e,t,n){},29:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(20),c=n.n(r),l=(n(28),n(29),n(17)),i=n(7),s=n(8),u=n(10),p=n(9),m=n(11),h=n(4),f=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).numberInQueue=function(){return o.a.createElement("h6",{className:"bold",key:Math.random()},a.state.people.length," people in the queue now")},a.checkIfInQueue=function(){var e=o.a.createElement("div",null,o.a.createElement("h6",null,"You are not in the queue!"),o.a.createElement(h.b,{to:"/"},o.a.createElement("h6",{className:"bold joinSmall"},"Join!"))),t="";if(window.localStorage.getItem("inQueue")){var n=a.state.people.find((function(e){return!1===e.auto}));0===(t=a.state.people.indexOf(n))&&(e=o.a.createElement("div",null,o.a.createElement("h6",{className:"bold"},"Go adopt your animal!"))),e=o.a.createElement("div",null,o.a.createElement("h6",{className:"bold"},"You are number ",t+1," in queue!"))}return e},a.state={numberInQueue:"",positionInQueue:"",people:[]},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.getPeople().then((function(t){return e.setState({numberInQueue:t.length,people:t})})),setInterval((function(){e.props.getPeople().then((function(t){return e.setState({numberInQueue:t.length,people:t})}))}),7e3)}},{key:"render",value:function(){var e=this.props.people||[];return o.a.createElement("section",{className:"personQueueList"},this.numberInQueue(e),this.checkIfInQueue(e))}}]),n}(o.a.Component),d=function(e){return o.a.createElement("button",{type:e.type,className:"bigButton ".concat(e.classNames)},e.text)},E=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("form",{id:"join",className:"join",name:"join",onSubmit:function(t){t.preventDefault(),e.props.addToQueue(e.state.name)}},o.a.createElement("label",{htmlFor:"inputName",className:"joinLabel"},"Your name:"),o.a.createElement("input",{type:"text",name:"inputName",id:"inputName",className:"inputName",onChange:function(t){return e.setState({name:t.currentTarget.value})}}),o.a.createElement(d,{type:"submit",classNames:"submit",text:"join queue"}))}}]),n}(o.a.Component);var w=function(e){return o.a.createElement("main",{className:"main splash"},o.a.createElement(h.b,{to:"/"},o.a.createElement("h1",null,"Petful")),o.a.createElement("div",{className:"yellowDivider"}),o.a.createElement("h3",null,"At Petful, we believe every pet deserves a home"),o.a.createElement("div",{className:"splashImage"},o.a.createElement("img",{src:"https://www.sheknows.com/wp-content/uploads/2018/08/woman-with-cat_xedhlr.jpeg",alt:"A woman greets her new pet"})),o.a.createElement("p",{className:"petfulDescription"},"We match pets and people on a first-in first-out basis."),o.a.createElement("p",{className:"petfulDescription"},"Put your name in the queue, and when it's your turn, come back and choose whether you want the next available dog, cat, or both!"),o.a.createElement("div",{className:"yellowDivider extra30space"}),o.a.createElement(E,{addToQueue:e.addToQueue}),o.a.createElement("div",{className:"yellowDivider extra30space"}),o.a.createElement(h.b,{to:"/pets"},o.a.createElement(d,{type:"button",classNames:"viewPets",text:"view pets"})))};var g=function(e){return o.a.createElement("article",{className:"petItem"},o.a.createElement("img",{src:e.imageURL,alt:e.imageDesc}),o.a.createElement("ul",null,o.a.createElement("li",null,e.name),o.a.createElement("li",null,e.animalType),o.a.createElement("li",null,e.sex),o.a.createElement("li",null,e.age," years old"),o.a.createElement("li",null,e.breed)),o.a.createElement("div",{className:"clear description"},e.story),o.a.createElement("button",{type:"button",className:"bigButton adopt ".concat(e.choiceTime?"":"grayed"),onClick:function(t){t.preventDefault(),e.newDog?e.newDog():e.newCat&&e.newCat(),e.adoptTime(e.animalType)}},"adopt me!"))},N=n(2),b=n.n(N),v=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).showPetList=function(){return[o.a.createElement(g,Object.assign({},a.props.dog,{key:"dog",choiceTime:a.props.choiceTime,adoptTime:a.props.adoptTime,animalType:"dog",newDog:a.props.newDog})),o.a.createElement(g,Object.assign({},a.props.cat,{key:"cat",choiceTime:a.props.choiceTime,adoptTime:a.props.adoptTime,animalType:"cat",newCat:a.props.newCat}))]},a.state={},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("main",{className:"main petList"},o.a.createElement(h.b,{to:"/"},o.a.createElement("h1",null,"Petful")),o.a.createElement("div",{className:"yellowDivider"}),o.a.createElement("h2",null,"Current Pets"),this.showPetList(),o.a.createElement("div",{className:"yellowDivider"}),o.a.createElement("div",{className:"adoptBoth"},o.a.createElement("h4",null,"or"),o.a.createElement("button",{type:"button",className:"bigButton adopt ".concat(this.props.choiceTime?"":"grayed"),onClick:function(){e.props.adoptTime("both"),e.props.newDog(),e.props.newCat()}},"adopt both")))}}]),n}(o.a.Component);var y=function(e){return o.a.createElement("li",{className:"adoptedItem"},o.a.createElement("div",{className:"animalSprite"},o.a.createElement("img",{src:"dog"===e.petType?"https://art.pixilart.com/5d29768f5c3f448.png":"https://art.pixilart.com/279c04744561021.png",alt:e.petType})),o.a.createElement("div",{className:"backgroundRow"},o.a.createElement("div",{className:"nameInfo"},o.a.createElement("span",{className:"petName"},o.a.createElement("span",{className:"bold"},e.petName)," was adopted!"))))};var T=function(e){return o.a.createElement("section",{className:"adoptedList"},o.a.createElement("h4",null,"Successful Adoptions"),o.a.createElement("ul",null,function(e){for(var t=[],n=0;n<3;n++)e[n]&&t.push(e[n]);return t.map((function(e,t){return o.a.createElement(y,Object.assign({},e,{key:t}))}))}(e.adoptionList)))};var I=function(e){return o.a.createElement("main",{className:"main congratulations"},o.a.createElement("h3",null,"Congratulations!!"),o.a.createElement("div",{className:"yellowDivider extra30space"}),o.a.createElement("h4",null,"Thank you so much for adopting"),o.a.createElement("h2",null,e.petName),o.a.createElement("div",{className:"yellowDivider extra30space"}),o.a.createElement("h5",null,"We hope your home finds much joy!"),o.a.createElement(h.b,{to:"/"},o.a.createElement("h6",null,"Click here to go back to the home page!")))},P=(n(35),function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).addToQueue=function(e){window.localStorage.setItem("inQueue","inQueue"),fetch("".concat(b.a.API_ENDPOINT,"people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:e})}).then((function(e){if(!e.ok)throw new Error("please refresh")})).then((function(){fetch("".concat(b.a.API_ENDPOINT,"people/all")).then((function(e){if(!e.ok)throw new Error("please refresh");return e.json()})).then((function(e){a.setState({people:e}),window.alert("Thank you for joining the queue!")}))})).catch((function(e){console.error("there has been an error")}))},a.cycleNext=function(e){e=e||{},fetch("".concat(b.a.API_ENDPOINT,"people/next"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("please refresh");return e.json()})).then((function(t){null!==t.wants&&(e=t),"cat"!==e.wants&&"both"!==e.wants||fetch("".concat(b.a.API_ENDPOINT,"cat"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("please refresh");return e.json()})).then((function(e){var t={petType:"cat",petName:e.name};a.setState({adoptionList:[t].concat(Object(l.a)(a.state.adoptionList))})})),"dog"!==e.wants&&"both"!==e.wants||fetch("".concat(b.a.API_ENDPOINT,"dog"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("please refresh");return e.json()})).then((function(e){var t={petType:"dog",petName:e.name};a.setState({adoptionList:[t].concat(Object(l.a)(a.state.adoptionList))})}))})).then((function(){a.getPets()})).catch((function(e){console.error("there has been an error")}))},a.attemptProcess=function(e){a.state.auto?a.cycleNext():window.localStorage.getItem("inQueue")&&!0!==a.state.choiceTime&&(a.setState({choiceTime:!0}),window.alert("Its time for you to adopt your animal!"))},a.getNextPerson=function(){setInterval((function(){fetch("".concat(b.a.API_ENDPOINT,"people/next")).then((function(e){if(!e.ok)throw new Error("please refresh");return e.json()})).then((function(e){!1===e.auto?a.setState({auto:!1},a.attemptProcess(e)):a.attemptProcess()})).catch((function(e){return console.error("error in people")}))}),7e3)},a.getPeople=function(){return fetch("".concat(b.a.API_ENDPOINT,"people/all")).then((function(e){if(!e.ok)throw new Error("please refresh");return e.json()})).then((function(e){return a.setState({people:e}),e})).catch((function(e){return console.error("there has been a people error")}))},a.getPets=function(){var e={};fetch("".concat(b.a.API_ENDPOINT,"dog")).then((function(e){if(!e.ok)throw new Error("please refresh");return e.json()})).then((function(t){e.dog=t})).then((function(){return fetch("".concat(b.a.API_ENDPOINT,"cat")).then((function(e){if(!e.ok)throw new Error("please refresh");return e.json()})).then((function(t){e.cat=t}))})).then((function(){return fetch("".concat(b.a.API_ENDPOINT,"people/all")).then((function(e){if(!e.ok)throw new Error("please refresh");return e.json()})).then((function(t){e.people=t}))})).then((function(){return a.setState({dog:e.dog,cat:e.cat,people:e.people})})).catch((function(e){return console.error("refresh please")}))},a.adoptTime=function(e){if(window.localStorage.getItem("inQueue")&&!0===a.state.choiceTime)return fetch("".concat(b.a.API_ENDPOINT,"people/next")).then((function(e){if(!e.ok)throw new Error("please refresh");return e.json()})).then((function(t){var n=t;"cat"===e?n.wants="cat":"dog"===e?n.wants="dog":"both"===e&&(n.wants="both"),a.setState({person:n}),window.localStorage.removeItem("inQueue"),a.props.history.push("/congratulations"),a.setState({auto:!0}),a.setState({choiceTime:!1}),a.cycleNext(n)})).catch((function(e){return console.error("error")}))},a.newDog=function(){fetch("".concat(b.a.API_ENDPOINT,"dog")).then((function(e){if(!e.ok)throw new Error("please refresh");return e.json()})).then((function(e){return a.setState({dog:e})})).catch((function(e){return console.error("error")}))},a.newCat=function(){fetch("".concat(b.a.API_ENDPOINT,"cat")).then((function(e){if(!e.ok)throw new Error("please refresh");return e.json()})).then((function(e){return a.setState({cat:e})})).catch((function(e){return console.error("error")}))},a.state={dog:"",cat:"",people:"",auto:!0,choiceTime:!1,adoptionList:[]},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.getPets(),this.getPeople(),this.getNextPerson()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement(f,{people:this.state.people,getPeople:this.getPeople}),o.a.createElement(m.a,{exact:!0,path:"/",render:function(){return o.a.createElement(w,{addToQueue:e.addToQueue})}}),o.a.createElement(m.a,{path:"/pets",render:function(){return o.a.createElement(v,{dog:e.state.dog,cat:e.state.cat,choiceTime:e.state.choiceTime,adoptTime:e.adoptTime,newDog:e.newDog,newCat:e.newCat})}}),o.a.createElement(m.a,{path:"/congratulations",component:I}),o.a.createElement(T,{adoptionList:this.state.adoptionList}))}}]),n}(o.a.Component)),j=Object(m.e)(P);c.a.render(o.a.createElement(h.a,null,o.a.createElement(j,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.600e5be6.chunk.js.map